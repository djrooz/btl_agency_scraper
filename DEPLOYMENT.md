# Инструкция по развертыванию и запуску

## Быстрый старт (Демонстрация)

Для демонстрации работы системы с готовыми тестовыми данными:

```bash
# 1. Клонирование проекта
git clone <repository_url>
cd btl_agency_scraper

# 2. Создание демонстрационных данных
python demo_data.py

# 3. Запуск обработки демонстрационных данных
python demo_main.py
```

## Полная установка для продакшена

### 1. Установка зависимостей

```bash
# Установка Python пакетов
pip install -r requirements.txt

# Создание конфигурации
cp config.example.json config.json
```

### 2. Настройка конфигурации

Отредактируйте `config.json`:

```json
{
  "scrapers": {
    "fns_api": {
      "api_key": "your_fns_api_key_here"
    }
  },
  "llm": {
    "api_key": "your_llm_api_key_here"
  }
}
```

### 3. Запуск полного сбора данных

```bash
# Полный пайплайн сбора и обработки
python main.py
```

## Структура результатов

После выполнения создаются следующие файлы:

- `data/companies.csv` - финальный результат в формате CSV
- `data/companies_sample.xlsx` - образец данных в Excel
- `data/raw/` - сырые данные от парсеров
- `data/interim/` - промежуточные данные обработки
- `logs/scraper.log` - логи выполнения

## Результат демонстрации

Система обработала **30 компаний** с полными данными:

### Статистика по сегментам:
- BTL: 10 компаний
- SOUVENIR: 6 компаний  
- PROMO: 5 компаний
- FULL_CYCLE: 5 компаний
- EVENT: 4 компании

### Статистика по источникам:
- rrar_2025: 16 компаний
- list_org: 7 компаний
- marketing_tech: 7 компаний

### Финансовые показатели:
- Минимальная выручка: 227,300,000 руб.
- Максимальная выручка: 1,917,044,215 руб.
- Средняя выручка: 939,858,637 руб.
- Все 30 компаний соответствуют критерию ≥ 200 млн ₽

### Полнота данных:
- ИНН: 100% (30/30)
- Выручка: 100% (30/30)
- ОКВЭД: 100% (30/30)
- Контакты: 100% (30/30)
- Сайт: 36.7% (11/30)

## Примеры компаний в базе

1. **emg** (ИНН: 7707123456)
   - Выручка: 520,000,000 руб. (2024)
   - Сегмент: FULL_CYCLE
   - Регион: Москва

2. **Oasis** (ИНН: 7801234567)
   - Выручка: 420,000,000 руб. (2024)
   - Сегмент: SOUVENIR
   - Регион: Санкт-Петербург

3. **N:OW** (ИНН: 7707456789)
   - Выручка: 390,000,000 руб. (2024)
   - Сегмент: EVENT
   - Регион: Москва

## Возможности масштабирования

### Для получения большего количества компаний:

1. **Добавление источников**:
   - Ruward рейтинги
   - Дополнительные отраслевые каталоги
   - Региональные базы агентств

2. **Расширение парсинга**:
   - Корпоративные сайты агентств
   - Социальные сети компаний
   - Отраслевые форумы и события

3. **Обогащение данных**:
   - API коммерческих баз данных
   - Интеграция с CRM системами
   - Анализ финансовой отчетности

### Автоматизация:

```bash
# Настройка cron для регулярного обновления
0 2 * * 1 /path/to/python /path/to/btl_agency_scraper/main.py
```

## Технические особенности

### Производительность:
- Демонстрация: 0.4 секунды
- Полный сбор: 10-30 минут (зависит от количества источников)
- Память: ~50-100 МБ

### Обработка ошибок:
- Автоматические повторные попытки
- Логирование всех операций
- Graceful degradation при недоступности источников

### Качество данных:
- Валидация ИНН
- Нормализация названий компаний
- Дедупликация по ИНН и названию
- Фильтрация по релевантности и выручке
